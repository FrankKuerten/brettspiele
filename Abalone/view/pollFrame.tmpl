#* Der Kommunikations-Frame ist unsichtbar, um die Datenmenge zu reduzieren,
   wird die Form nicht mit CSS und Table aufbereitet.
*#
<html>
    <head>
        <script language="JavaScript" src="/Abalone/ServerKommunikation.js"></script>
    </head>
    <body onLoad="meldeSpielstand()">
        <form name="AktuellerStand" method="post" action="spielzug">
            <input name="partienummer" type="hidden" value="$partie.nummer">
            <input name="nameSchwarz" type="hidden" value="$partie.schwarz">
            <input name="nameWeiss" type="hidden" value="$partie.weiss">
            #set $zugnummer = len($partie.zuege)
            <input name="zugnummer" type="hidden" value="$zugnummer">
            <input name="letzterZug" type="hidden" value="$letzterZug">
            #set $standVorher = ""
            #if $letzterZug == "True":
                #set $stand = $partie.zuege[-1]
                #if len($partie.zuege) > 1:
                    #set $standVorher = $partie.zuege[-2]
                #end if
            #else:
                #set $stand = $partie.zuege
            #end if
            <input name="stand" type="hidden" value="$stand">
            <input name="standVorher" type="hidden" value="$standVorher">
            #set $spielfarbe = ""
            #if $benutzer.name == $partie.schwarz:
                #set $spielfarbe = "s"
            #end if
            #if $benutzer.name == $partie.weiss:
                #set $spielfarbe = "w"
            #end if
            <input name="spielfarbe" type="hidden" value="$spielfarbe">
            #if $zugnummer % 2 == 0:
                #set $amZug = "w"
            #else:
                #set $amZug = "s"
            #end if
            <input name="amZug" type="hidden" value="$amZug">
        </form>
    </body>
</html>
